<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Exploration des données brutes • ACC</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Exploration des données brutes">
<meta property="og:description" content="ACC">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ACC</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li class="dropdown-header">Description des données</li>
    <li>
      <a href="../articles/exploration-donnees-brutes.html">Exploration des données brutes</a>
    </li>
    <li>
      <a href="../articles/Stats_Descriptives.html">Statistiques descriptives avec ggplot2</a>
    </li>
    <li>
      <a href="../articles/Carto.html">Cartographie</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Classification</li>
    <li>
      <a href="../articles/ACM_classif.html">Analyses des Correspondances Multiples et Classification sur la base accidents</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Modélisation</li>
    <li>
      <a href="../articles/modeles.html">Prévisions des accidents ayant entrainés des blessures/décès</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ACCCertDS/ACC/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="exploration-donnees-brutes_files/header-attrs-2.5/header-attrs.js"></script><link href="exploration-donnees-brutes_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="exploration-donnees-brutes_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Exploration des données brutes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ACCCertDS/ACC/blob/master/vignettes/exploration-donnees-brutes.Rmd"><code>vignettes/exploration-donnees-brutes.Rmd</code></a></small>
      <div class="hidden name"><code>exploration-donnees-brutes.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># devtools::load_all()</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://acccertds.github.io/ACC/">ACC</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="co">#&gt; -- Attaching packages --------------------------------------- tidyverse 1.3.0 --</span>
<span class="co">#&gt; v ggplot2 3.3.2     v purrr   0.3.4</span>
<span class="co">#&gt; v tibble  3.0.4     v dplyr   1.0.2</span>
<span class="co">#&gt; v tidyr   1.1.2     v stringr 1.4.0</span>
<span class="co">#&gt; v readr   1.4.0     v forcats 0.5.0</span>
<span class="co">#&gt; -- Conflicts ------------------------------------------ tidyverse_conflicts() --</span>
<span class="co">#&gt; x dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/feddelegrand7/BARIS">BARIS</a></span><span class="op">)</span></code></pre></div>
<p>Ce package a pour objectif d’accéder et d’analyser les données publiques d’accidents de la circulation.</p>
<div id="téléchargement-des-données" class="section level1">
<h1 class="hasAnchor">
<a href="#t%C3%A9l%C3%A9chargement-des-donn%C3%A9es" class="anchor"></a>Téléchargement des données</h1>
<p>Ces données sont disponibles sur la plateforme open data <a href="https://www.data.gouv.fr/fr/">data.gouv.fr</a>.</p>
<p>Le package <a href="https://cran.r-project.org/package=BARIS">BARIS</a> permet de faire le lien vers l’API data.gouv.fr. On peut ainsi obtenir la présentation du <em>dataset</em> à l’aide de <code>BARIS_explain</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">id_donnees</span> <span class="op">&lt;-</span> <span class="st">"53698f4ca3a729239d2036df"</span>
<span class="fu"><a href="https://rdrr.io/pkg/BARIS/man/BARIS_explain.html">BARIS_explain</a></span><span class="op">(</span><span class="va">id_donnees</span><span class="op">)</span> </code></pre></div>
<p>[1] “Pour chaque accident corporel (soit un accident survenu sur une voie ouverte à la circulation publique, impliquant au moins un véhicule et ayant fait au moins une victime ayant nécessité des soins), des saisies d’information décrivant l’accident sont effectuées par l’unité des forces de l’ordre (police, gendarmerie, etc.) qui est intervenue sur le lieu de l’accident. Ces saisies sont rassemblées dans une fiche intitulée bulletin d’analyse des accidents corporels. L’ensemble de ces fiches constitue le fichier national des accidents corporels de la circulation dit « Fichier BAAC » administré par l’Observatoire national interministériel de la sécurité routière "ONISR". Les bases de données, extraites du fichier BAAC, répertorient l’intégralité des accidents corporels de la circulation, intervenus durant une année précise en France métropolitaine, dans les départements d’Outre-mer (Guadeloupe, Guyane, Martinique, La Réunion et Mayotte depuis 2012) et dans les autres territoires d’outre-mer (Saint-Pierre-et-Miquelon, Saint-Barthélemy, Saint-Martin, Wallis-et-Futuna, Polynésie française et Nouvelle-Calédonie ; disponible qu’à partir de 2019 dans l’open data) avec une description simplifiée. Cela comprend des informations de localisation de l’accident, telles que renseignées ainsi que des informations concernant les caractéristiques de l’accident et son lieu, les véhicules impliqués et leurs victimes. Par rapport aux bases de données agrégées 2005-2010 et 2006-2011 actuellement disponibles sur le site www.data.gouv.fr, les bases de données de 2005 à 2019 sont désormais annuelles et composées de 4 fichiers (Caractéristiques – Lieux – Véhicules – Usagers) au format csv. Ces bases occultent néanmoins certaines données spécifiques relatives aux usagers et aux véhicules et à leur comportement dans la mesure où la divulgation de ces données porterait atteinte à la protection de la vie privée des personnes physiques aisément identifiables ou ferait apparaître le comportement de telles personnes alors que la divulgation de ce comportement pourrait leur porter préjudice (avis de la CADA – 2 janvier 2012). Avertissement : Les données sur la qualification de blessé hospitalisé depuis l’année 2018 ne peuvent être comparées aux années précédentes suite à des modifications de process de saisie des forces de l’ordre. L’indicateur « blessé hospitalisé » n’est plus labellisé par l’autorité de la statistique publique depuis 2019. La validité des exploitations statistiques qui peuvent être faites à partir de cette base dépend des modes de vérifications propres dans le domaine d’application de la sécurité routière et notamment d’une connaissance précise des définitions afférentes à chaque variable utilisée. Pour toute exploitation, il est important de prendre notamment connaissance de la structure de la fiche BAAC jointe ainsi que du guide d’utilisation de la codification du bulletin d’analyse des accidents corporels de la circulation. Rappelons qu’un certain nombre d’indicateurs issus de cette base font l’objet d’une labellisation, par l’autorité de la statistique publique (arrêté du 27 novembre 2019). La liste est disponible à l’adresse : <a href="https://www.onisr.securite-routiere.gouv.fr/outils-statistiques/indicateurs-labellises" class="uri">https://www.onisr.securite-routiere.gouv.fr/outils-statistiques/indicateurs-labellises</a>”</p>
<p>Ce jeu de données est divisé en 4 parties CARACTÉRISTIQUES, LIEUX, USAGERS, VÉHICULES. Il existe un lot de ces 4 fichiers par année entre 2005 et 2019</p>
<p>Un fichier descriptif accompagne ces données, et on reprend ici brièvement les définitions données dans ce document.</p>
<ol style="list-style-type: decimal">
<li>La rubrique CARACTERISTIQUES qui décrit les circonstances générales de l’accident</li>
<li>La rubrique LIEUX qui décrit le lieu principal de l’accident même si celui-ci s’est déroulé à une intersection</li>
<li>La rubrique VEHICULES impliqués</li>
<li>La rubrique USAGERS impliqués</li>
</ol>
<div id="export-rapide-des-données-2019" class="section level2">
<h2 class="hasAnchor">
<a href="#export-rapide-des-donn%C3%A9es-2019" class="anchor"></a>Export rapide des données 2019</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ressources</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/BARIS/man/BARIS_resources.html">BARIS_resources</a></span><span class="op">(</span><span class="va">id_donnees</span><span class="op">)</span> <span class="co">#Tibble avec les URL</span>
<span class="va">data_2019</span> <span class="op">&lt;-</span> <span class="va">ressources</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="fu">str_detect</span><span class="op">(</span><span class="va">title</span>,<span class="st">"2019"</span><span class="op">)</span>,<span class="va">format</span><span class="op">==</span><span class="st">"csv"</span><span class="op">)</span> <span class="co">#On garde les fichiers csv de 2019</span>

<span class="co"># if(!dir.exists("data-raw"))</span>
  <span class="co"># dir.create("data-raw")</span>
<span class="co"># Commenté pour ne pas re-télécharger les données systématiquement</span>
<span class="co"># for(i in 1:nrow(data_2019)){</span>
<span class="co">#   tmp_df &lt;- data_2019[i,]</span>
<span class="co">#   download.file(url = tmp_df$url, </span>
<span class="co">#                 destfile = paste0("data-raw/",tmp_df$title),overwrite = T)</span>
<span class="co"># }</span></code></pre></div>
</div>
</div>
<div id="exploration-des-données-de-la-table-caractéristiques" class="section level1">
<h1 class="hasAnchor">
<a href="#exploration-des-donn%C3%A9es-de-la-table-caract%C3%A9ristiques" class="anchor"></a>Exploration des données de la table Caractéristiques</h1>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># caractéristiques générales de la table</span>
<span class="va">caracteristiques</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dl_data.html">dl_caracteristiques</a></span><span class="op">(</span><span class="fl">2019L</span><span class="op">)</span>
<span class="co">#&gt; i Chargement de caracteristiques-2019.csv</span>
<span class="co"># caracteristiques &lt;- read.table(here::here("data-raw","caracteristiques-2019.csv"),sep=";",header = T)</span>
<span class="co"># data("caracteristiques", package = "ACC")</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">)</span>
<span class="co">#&gt;    Num_Acc               jour            mois              an      </span>
<span class="co">#&gt;  Length:58840       Min.   : 1.00   Min.   : 1.000   Min.   :2019  </span>
<span class="co">#&gt;  Class :character   1st Qu.: 8.00   1st Qu.: 4.000   1st Qu.:2019  </span>
<span class="co">#&gt;  Mode  :character   Median :16.00   Median : 7.000   Median :2019  </span>
<span class="co">#&gt;                     Mean   :15.68   Mean   : 6.688   Mean   :2019  </span>
<span class="co">#&gt;                     3rd Qu.:23.00   3rd Qu.:10.000   3rd Qu.:2019  </span>
<span class="co">#&gt;                     Max.   :31.00   Max.   :12.000   Max.   :2019  </span>
<span class="co">#&gt;                                                                    </span>
<span class="co">#&gt;      hrmn                lum            dep                com           </span>
<span class="co">#&gt;  Length:58840       Min.   :1.000   Length:58840       Length:58840      </span>
<span class="co">#&gt;  Class :character   1st Qu.:1.000   Class :character   Class :character  </span>
<span class="co">#&gt;  Mode  :character   Median :1.000   Mode  :character   Mode  :character  </span>
<span class="co">#&gt;                     Mean   :1.945                                        </span>
<span class="co">#&gt;                     3rd Qu.:3.000                                        </span>
<span class="co">#&gt;                     Max.   :5.000                                        </span>
<span class="co">#&gt;                                                                          </span>
<span class="co">#&gt;       agg             int             atm             col       </span>
<span class="co">#&gt;  Min.   :1.000   Min.   :1.000   Min.   :1.000   Min.   :1.000  </span>
<span class="co">#&gt;  1st Qu.:1.000   1st Qu.:1.000   1st Qu.:1.000   1st Qu.:3.000  </span>
<span class="co">#&gt;  Median :2.000   Median :1.000   Median :1.000   Median :3.000  </span>
<span class="co">#&gt;  Mean   :1.646   Mean   :2.025   Mean   :1.618   Mean   :4.165  </span>
<span class="co">#&gt;  3rd Qu.:2.000   3rd Qu.:2.000   3rd Qu.:1.000   3rd Qu.:6.000  </span>
<span class="co">#&gt;  Max.   :2.000   Max.   :9.000   Max.   :9.000   Max.   :7.000  </span>
<span class="co">#&gt;                                  NA's   :1       NA's   :2      </span>
<span class="co">#&gt;      adr                lat                long          </span>
<span class="co">#&gt;  Length:58840       Length:58840       Length:58840      </span>
<span class="co">#&gt;  Class :character   Class :character   Class :character  </span>
<span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character  </span>
<span class="co">#&gt;                                                          </span>
<span class="co">#&gt;                                                          </span>
<span class="co">#&gt;                                                          </span>
<span class="co">#&gt; </span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Num_Acc" "jour"    "mois"    "an"      "hrmn"    "lum"     "dep"    </span>
<span class="co">#&gt;  [8] "com"     "agg"     "int"     "atm"     "col"     "adr"     "lat"    </span>
<span class="co">#&gt; [15] "long"</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">)</span> <span class="co">#58 840</span>
<span class="co">#&gt; [1] 58840</span>
<span class="va">caracteristiques</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 15</span>
<span class="co">#&gt;    Num_Acc  jour  mois    an hrmn    lum dep   com     agg   int   atm   col</span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1 201900~    30    11  2019 01:30     4 93    93053     1     1     1     2</span>
<span class="co">#&gt;  2 201900~    30    11  2019 02:50     3 93    93066     1     1     1     6</span>
<span class="co">#&gt;  3 201900~    28    11  2019 15:15     1 92    92036     1     1     1     4</span>
<span class="co">#&gt;  4 201900~    30    11  2019 20:20     5 94    94069     1     1     1     4</span>
<span class="co">#&gt;  5 201900~    30    11  2019 04:00     3 94    94028     1     1     1     2</span>
<span class="co">#&gt;  6 201900~    28    11  2019 14:03     1 87    87085     1     3     2     3</span>
<span class="co">#&gt;  7 201900~    28    11  2019 07:27     2 69    69092     2     1     8     2</span>
<span class="co">#&gt;  8 201900~    29    11  2019 16:40     2 38    38544     2     1     1     6</span>
<span class="co">#&gt;  9 201900~    28    11  2019 18:00     3 34    34129     1     1     1     5</span>
<span class="co">#&gt; 10 201900~    28    11  2019 14:50     1 13    13206     2     1     1     2</span>
<span class="co">#&gt; # ... with 3 more variables: adr &lt;chr&gt;, lat &lt;chr&gt;, long &lt;chr&gt;</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable lum = Conditions d eclairage</span>

<span class="va">caracteristiques</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">lum</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 5 x 3</span>
<span class="co">#&gt;     lum     n    prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 39002 0.663  </span>
<span class="co">#&gt; 2     2  3781 0.0643 </span>
<span class="co">#&gt; 3     3  5948 0.101  </span>
<span class="co">#&gt; 4     4   517 0.00879</span>
<span class="co">#&gt; 5     5  9592 0.163</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">$</span><span class="va">lum</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Conditions d eclairage"</span>, col <span class="op">=</span> <span class="st">"firebrick"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># on pourrait regrouper les modalités 3 et 4 en "sans éclairage"</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable agg = Localisation</span>

<span class="va">caracteristiques</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">agg</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 2 x 3</span>
<span class="co">#&gt;     agg     n  prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 20836 0.354</span>
<span class="co">#&gt; 2     2 38004 0.646</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">$</span><span class="va">agg</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Localisation"</span>, col <span class="op">=</span> <span class="st">"firebrick"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable int = Intersection</span>

<span class="va">caracteristiques</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">int</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 9 x 3</span>
<span class="co">#&gt;     int     n     prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 38796 0.659   </span>
<span class="co">#&gt; 2     2  6884 0.117   </span>
<span class="co">#&gt; 3     3  6046 0.103   </span>
<span class="co">#&gt; 4     4  1286 0.0219  </span>
<span class="co">#&gt; 5     5   299 0.00508 </span>
<span class="co">#&gt; 6     6  2161 0.0367  </span>
<span class="co">#&gt; 7     7   696 0.0118  </span>
<span class="co">#&gt; 8     8    55 0.000935</span>
<span class="co">#&gt; 9     9  2617 0.0445</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">$</span><span class="va">int</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Intersection"</span>, col <span class="op">=</span> <span class="st">"firebrick"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># on pourrait créer une modalité "intersection" à partir des modalités (2, 3, 4, 5, 9)</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable atm = Conditions atmosphériques</span>

<span class="va">caracteristiques</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">atm</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 10 x 3</span>
<span class="co">#&gt;      atm     n      prop</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1     1 46528 0.791    </span>
<span class="co">#&gt;  2     2  6597 0.112    </span>
<span class="co">#&gt;  3     3  1457 0.0248   </span>
<span class="co">#&gt;  4     4   219 0.00372  </span>
<span class="co">#&gt;  5     5   329 0.00559  </span>
<span class="co">#&gt;  6     6   177 0.00301  </span>
<span class="co">#&gt;  7     7  1035 0.0176   </span>
<span class="co">#&gt;  8     8  2202 0.0374   </span>
<span class="co">#&gt;  9     9   295 0.00501  </span>
<span class="co">#&gt; 10    NA     1 0.0000170</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">$</span><span class="va">atm</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Conditions atmosphériques"</span>, col <span class="op">=</span> <span class="st">"firebrick"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># on pourrait créer une modalité "intersection" à partir des modalités 2 et 3 et créer une modalité autre à partir des modalités (-1, 4, 5, 6, 7, 8, 9)</span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable col = Type de collision</span>

<span class="va">caracteristiques</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">col</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 8 x 3</span>
<span class="co">#&gt;     col     n      prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1  5329 0.0906   </span>
<span class="co">#&gt; 2     2  7390 0.126    </span>
<span class="co">#&gt; 3     3 17124 0.291    </span>
<span class="co">#&gt; 4     4  2270 0.0386   </span>
<span class="co">#&gt; 5     5  1927 0.0327   </span>
<span class="co">#&gt; 6     6 18708 0.318    </span>
<span class="co">#&gt; 7     7  6090 0.104    </span>
<span class="co">#&gt; 8    NA     2 0.0000340</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">caracteristiques</span><span class="op">$</span><span class="va">col</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Type de collision"</span>, col <span class="op">=</span> <span class="st">"firebrick"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># on pourrait créer une modalité "3 et +" à partir des modalités 4 et 5</span></code></pre></div>
<div id="insertion-des-libellés-dans-la-table-caracteristiques" class="section level2">
<h2 class="hasAnchor">
<a href="#insertion-des-libell%C3%A9s-dans-la-table-caracteristiques" class="anchor"></a>Insertion des libellés dans la table CARACTERISTIQUES</h2>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># carac &lt;- read.csv(here::here("data-raw","caracteristiques-2019.csv"),sep=";",header=T)</span>
<span class="co"># carac &lt;- caracteristiques</span>
<span class="co"># Ajout des libellés relatifs à la luminosité avec regroupement des modalités 3 et 4</span>
<span class="va">caracteristiques</span> <span class="op">&lt;-</span> <span class="va">caracteristiques</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">gps</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>lum<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                            <span class="va">lum</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Plein jour"</span>,
                            <span class="va">lum</span><span class="op">==</span><span class="fl">2</span> <span class="op">~</span> <span class="st">"Crépuscule ou aube"</span>,
                            <span class="va">lum</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Nuit sans éclairage"</span>,
                            <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Nuit avec éclairage public"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs à l'agglomération</span>
  <span class="fu">mutate</span><span class="op">(</span>agg<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">agg</span><span class="op">==</span><span class="fl">1</span>,<span class="st">"Hors agglomération"</span>,<span class="st">"En agglomération"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs aux types d'intersection avec regroupement des variables 2, 3, 4, 5 et 9 en "Intersection"</span>
  <span class="fu">mutate</span><span class="op">(</span>intersection<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                            <span class="va">int</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Hors intersection"</span>, 
                            <span class="va">int</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span>,<span class="fl">9</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Intersection"</span>,
                            <span class="va">int</span><span class="op">==</span><span class="fl">6</span> <span class="op">~</span> <span class="st">"Giratoire"</span>,
                            <span class="va">int</span><span class="op">==</span><span class="fl">7</span> <span class="op">~</span> <span class="st">"Place"</span>,
                            <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Passage à niveau"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">`int`</span><span class="op">)</span> <span class="op">%&gt;%</span> 
<span class="co"># Ajout des libellés relatifs aux conditions atmosphériques</span>
  <span class="fu">mutate</span><span class="op">(</span>atm<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                            <span class="va">atm</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Normale"</span>,
                            <span class="va">atm</span><span class="op">==</span><span class="fl">2</span> <span class="op">~</span> <span class="st">"Pluie légère"</span>,
                            <span class="va">atm</span><span class="op">==</span><span class="fl">3</span> <span class="op">~</span> <span class="st">"Pluie forte"</span>,
                            <span class="va">atm</span><span class="op">==</span><span class="fl">4</span> <span class="op">~</span> <span class="st">"Neige - grêle"</span>,
                            <span class="va">atm</span><span class="op">==</span><span class="fl">5</span> <span class="op">~</span> <span class="st">"Brouillard - fumée"</span>,
                            <span class="va">atm</span><span class="op">==</span><span class="fl">6</span> <span class="op">~</span> <span class="st">"Vent fort - tempête"</span>,
                            <span class="va">atm</span><span class="op">==</span><span class="fl">7</span> <span class="op">~</span> <span class="st">"Temps éblouissant"</span>,
                            <span class="va">atm</span><span class="op">==</span><span class="fl">8</span> <span class="op">~</span> <span class="st">"Temps couvert"</span>,
                            <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Autre"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs au nombre de véhicules impliqués dans la collision avec regroupement des modalités 4 et 5</span>
  <span class="fu">mutate</span><span class="op">(</span>col<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                            <span class="va">col</span><span class="op">==</span><span class="st">'-1'</span> <span class="op">~</span> <span class="st">"Non Renseigné"</span>,
                            <span class="va">col</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"2 véhicules - frontale"</span>,
                            <span class="va">col</span><span class="op">==</span><span class="fl">2</span> <span class="op">~</span> <span class="st">"2 véhicules - par l'arrière"</span>,
                            <span class="va">col</span><span class="op">==</span><span class="fl">3</span> <span class="op">~</span> <span class="st">"2 véhicules - par le côté"</span>,
                            <span class="va">col</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span> <span class="op">~</span> <span class="st">"3 véhicules et plus"</span>,
                            <span class="va">col</span><span class="op">==</span><span class="fl">6</span> <span class="op">~</span> <span class="st">"Autre collision"</span>,
                            <span class="cn">TRUE</span><span class="op">~</span> <span class="st">"Sans collision"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co"># Date de l'accident</span>
  <span class="fu">mutate</span><span class="op">(</span>
    annee <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">an</span><span class="op">&lt;</span><span class="fl">2000L</span>, <span class="va">an</span><span class="op">+</span><span class="fl">2000</span>, <span class="va">an</span><span class="op">)</span>,
    date_acc <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">annee</span>, <span class="va">mois</span>, <span class="va">jour</span>, sep <span class="op">=</span> <span class="st">'-'</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">an</span>, <span class="op">-</span><span class="va">annee</span>, <span class="op">-</span><span class="va">jour</span>, <span class="op">-</span><span class="va">mois</span><span class="op">)</span>

<span class="va">coord_gps_code_commune</span> <span class="op">&lt;-</span> <span class="fu">BARIS</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/BARIS/man/BARIS_resources.html">BARIS_resources</a></span><span class="op">(</span><span class="st">"545b55e1c751df52de9b6045"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">title</span>,<span class="st">"Base off"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">BARIS</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/BARIS/man/BARIS_extract.html">BARIS_extract</a></span><span class="op">(</span>format <span class="op">=</span> <span class="st">"csv"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">coordonnees_gps</span><span class="op">!=</span><span class="st">""</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">code_commune_insee</span>, <span class="va">coordonnees_gps</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span><span class="va">coordonnees_gps</span>, sep <span class="op">=</span> <span class="st">","</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'lat'</span>,<span class="st">'long'</span><span class="op">)</span><span class="op">)</span>

<span class="va">caracteristiques_avec_gps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">caracteristiques</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">lat</span><span class="op">)</span><span class="op">)</span>
<span class="va">caracteristiques_sans_gps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">caracteristiques</span>, <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">lat</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">lat</span>,<span class="op">-</span><span class="va">long</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">left_join</span><span class="op">(</span><span class="va">coord_gps_code_commune</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"com"</span><span class="op">=</span><span class="st">"code_commune_insee"</span><span class="op">)</span><span class="op">)</span>
<span class="va">caracteristiques</span> <span class="op">&lt;-</span> <span class="fu">bind_rows</span><span class="op">(</span><span class="va">caracteristiques_avec_gps</span>, <span class="va">caracteristiques_sans_gps</span><span class="op">)</span>

<span class="va">caracteristiques</span></code></pre></div>
</div>
</div>
<div id="exploration-des-données-de-la-table-lieux" class="section level1">
<h1 class="hasAnchor">
<a href="#exploration-des-donn%C3%A9es-de-la-table-lieux" class="anchor"></a>Exploration des données de la table Lieux</h1>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#lieux &lt;- read.table(here::here("data-raw","lieux-2019.csv"),sep=";",header = T)</span>
<span class="va">lieux</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dl_data.html">dl_lieux</a></span><span class="op">(</span><span class="fl">2019L</span><span class="op">)</span>
<span class="co">#&gt; i Chargement de lieux-2019.csv</span>
<span class="co"># data(lieux)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">)</span>
<span class="co">#&gt;    Num_Acc               catr           voie                v1           </span>
<span class="co">#&gt;  Length:58840       Min.   :1.000   Length:58840       Length:58840      </span>
<span class="co">#&gt;  Class :character   1st Qu.:3.000   Class :character   Class :character  </span>
<span class="co">#&gt;  Mode  :character   Median :3.000   Mode  :character   Mode  :character  </span>
<span class="co">#&gt;                     Mean   :3.348                                        </span>
<span class="co">#&gt;                     3rd Qu.:4.000                                        </span>
<span class="co">#&gt;                     Max.   :9.000                                        </span>
<span class="co">#&gt;                                                                          </span>
<span class="co">#&gt;       v2                 circ            nbv              vosp       </span>
<span class="co">#&gt;  Length:58840       Min.   :1.000   Min.   : 0.000   Min.   :0.0000  </span>
<span class="co">#&gt;  Class :character   1st Qu.:2.000   1st Qu.: 2.000   1st Qu.:0.0000  </span>
<span class="co">#&gt;  Mode  :character   Median :2.000   Median : 2.000   Median :0.0000  </span>
<span class="co">#&gt;                     Mean   :1.981   Mean   : 2.443   Mean   :0.1491  </span>
<span class="co">#&gt;                     3rd Qu.:2.000   3rd Qu.: 3.000   3rd Qu.:0.0000  </span>
<span class="co">#&gt;                     Max.   :4.000   Max.   :12.000   Max.   :3.0000  </span>
<span class="co">#&gt;                     NA's   :3154    NA's   :650      NA's   :669     </span>
<span class="co">#&gt;       prof            pr                pr1                 plan      </span>
<span class="co">#&gt;  Min.   :1.000   Length:58840       Length:58840       Min.   :1.000  </span>
<span class="co">#&gt;  1st Qu.:1.000   Class :character   Class :character   1st Qu.:1.000  </span>
<span class="co">#&gt;  Median :1.000   Mode  :character   Mode  :character   Median :1.000  </span>
<span class="co">#&gt;  Mean   :1.244                                         Mean   :1.306  </span>
<span class="co">#&gt;  3rd Qu.:1.000                                         3rd Qu.:1.000  </span>
<span class="co">#&gt;  Max.   :4.000                                         Max.   :4.000  </span>
<span class="co">#&gt;  NA's   :14                                            NA's   :11     </span>
<span class="co">#&gt;      lartpc          larrout            surf           infra       </span>
<span class="co">#&gt;  Min.   :  0.00   Min.   :  2.40   Min.   :1.000   Min.   :0.0000  </span>
<span class="co">#&gt;  1st Qu.:  0.00   1st Qu.:  6.00   1st Qu.:1.000   1st Qu.:0.0000  </span>
<span class="co">#&gt;  Median :  0.00   Median : 14.00   Median :1.000   Median :0.0000  </span>
<span class="co">#&gt;  Mean   :  4.68   Mean   : 42.05   Mean   :1.279   Mean   :0.8821  </span>
<span class="co">#&gt;  3rd Qu.:  2.00   3rd Qu.: 65.00   3rd Qu.:1.000   3rd Qu.:0.0000  </span>
<span class="co">#&gt;  Max.   :180.00   Max.   :730.00   Max.   :9.000   Max.   :9.0000  </span>
<span class="co">#&gt;  NA's   :58629    NA's   :58468    NA's   :21      NA's   :45      </span>
<span class="co">#&gt;       situ            vma        </span>
<span class="co">#&gt;  Min.   :1.000   Min.   :  0.00  </span>
<span class="co">#&gt;  1st Qu.:1.000   1st Qu.: 50.00  </span>
<span class="co">#&gt;  Median :1.000   Median : 50.00  </span>
<span class="co">#&gt;  Mean   :1.408   Mean   : 60.85  </span>
<span class="co">#&gt;  3rd Qu.:1.000   3rd Qu.: 80.00  </span>
<span class="co">#&gt;  Max.   :8.000   Max.   :800.00  </span>
<span class="co">#&gt;  NA's   :116     NA's   :881</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Num_Acc" "catr"    "voie"    "v1"      "v2"      "circ"    "nbv"    </span>
<span class="co">#&gt;  [8] "vosp"    "prof"    "pr"      "pr1"     "plan"    "lartpc"  "larrout"</span>
<span class="co">#&gt; [15] "surf"    "infra"   "situ"    "vma"</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">)</span> <span class="co">#58 840</span>
<span class="co">#&gt; [1] 58840</span>
<span class="va">lieux</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 18</span>
<span class="co">#&gt;    Num_Acc  catr voie  v1    v2     circ   nbv  vosp  prof pr    pr1    plan</span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 201900~     1 "3"   0     &lt;NA&gt;      3    10     0     1 6     900       2</span>
<span class="co">#&gt;  2 201900~     1 "1"   0     &lt;NA&gt;      1     2     0     4 3     845       2</span>
<span class="co">#&gt;  3 201900~     1 "86"  0     &lt;NA&gt;      3     8     0     1 10    500       3</span>
<span class="co">#&gt;  4 201900~     1 "4"   0     &lt;NA&gt;      3     5     0     1 2     299       1</span>
<span class="co">#&gt;  5 201900~     1 "86 " 0     INT       1     3     0     1 41    0         3</span>
<span class="co">#&gt;  6 201900~     4 "FOC~ 0     &lt;NA&gt;      2     2     0     1 0     0         1</span>
<span class="co">#&gt;  7 201900~     4 "BEA~ 0     &lt;NA&gt;      2     2     0     1 1     0         1</span>
<span class="co">#&gt;  8 201900~     4 "VIC~ 0     &lt;NA&gt;      2     2     0     2 0     0         1</span>
<span class="co">#&gt;  9 201900~     3 "986~ 0     &lt;NA&gt;      1     4     0     1 (1)   (1)       1</span>
<span class="co">#&gt; 10 201900~     7 "LOU~ 0     &lt;NA&gt;      2     4     0     2 0     0         1</span>
<span class="co">#&gt; # ... with 6 more variables: lartpc &lt;dbl&gt;, larrout &lt;dbl&gt;, surf &lt;dbl&gt;,</span>
<span class="co">#&gt; #   infra &lt;int&gt;, situ &lt;int&gt;, vma &lt;dbl&gt;</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable catr = Catégorie de la route</span>

<span class="va">lieux</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">catr</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 8 x 3</span>
<span class="co">#&gt;    catr     n    prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1  5823 0.0990 </span>
<span class="co">#&gt; 2     2  3866 0.0657 </span>
<span class="co">#&gt; 3     3 20963 0.356  </span>
<span class="co">#&gt; 4     4 25771 0.438  </span>
<span class="co">#&gt; 5     5    87 0.00148</span>
<span class="co">#&gt; 6     6   442 0.00751</span>
<span class="co">#&gt; 7     7  1298 0.0221 </span>
<span class="co">#&gt; 8     9   590 0.0100</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">$</span><span class="va">catr</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Catégorie de la route"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># on pourrait garder les modalités 1, 2, 3 et 4 et regrouper les modalités 5 à 9 en 'autres'</span>
  </code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable circ = Régime de circulation</span>

<span class="va">lieux</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">circ</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 5 x 3</span>
<span class="co">#&gt;    circ     n    prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 10381 0.176  </span>
<span class="co">#&gt; 2     2 36367 0.618  </span>
<span class="co">#&gt; 3     3  8577 0.146  </span>
<span class="co">#&gt; 4     4   361 0.00614</span>
<span class="co">#&gt; 5    NA  3154 0.0536</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">$</span><span class="va">circ</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Régime de circulation"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-13-1.png" width="672"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># on pourrait garder les modalités 1, 2 et 3 et regrouper les modalités -1 et 4 en 'autres/non renseigné'</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable nbv = Nombre total de voies de circulation</span>

<span class="va">lieux</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">nbv</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 14 x 3</span>
<span class="co">#&gt;      nbv     n     prop</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1     0  1646 0.0280  </span>
<span class="co">#&gt;  2     1  5799 0.0986  </span>
<span class="co">#&gt;  3     2 35600 0.605   </span>
<span class="co">#&gt;  4     3  4402 0.0748  </span>
<span class="co">#&gt;  5     4  7075 0.120   </span>
<span class="co">#&gt;  6     5   984 0.0167  </span>
<span class="co">#&gt;  7     6  1592 0.0271  </span>
<span class="co">#&gt;  8     7   220 0.00374 </span>
<span class="co">#&gt;  9     8   535 0.00909 </span>
<span class="co">#&gt; 10     9   107 0.00182 </span>
<span class="co">#&gt; 11    10   165 0.00280 </span>
<span class="co">#&gt; 12    11    38 0.000646</span>
<span class="co">#&gt; 13    12    27 0.000459</span>
<span class="co">#&gt; 14    NA   650 0.0110</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">$</span><span class="va">nbv</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Nombre total de voies de circulation"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-14-1.png" width="672"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># on pourrait garder les modalités 1, 2 et créer la modalité "3 et +" et créer la modalité "non renseigné" pour les valeurs (-1,0)</span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable prof = Profil de la route</span>

<span class="va">lieux</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">prof</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 5 x 3</span>
<span class="co">#&gt;    prof     n     prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 47299 0.804   </span>
<span class="co">#&gt; 2     2  9611 0.163   </span>
<span class="co">#&gt; 3     3  1000 0.0170  </span>
<span class="co">#&gt; 4     4   916 0.0156  </span>
<span class="co">#&gt; 5    NA    14 0.000238</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">$</span><span class="va">prof</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Profil de la route"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-15-1.png" width="672"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># on pourrait garder les modalités 1, 2 et regrouper les modalités -1, 3 et 4 en 'autres/non renseigné'</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable plan = Tracé de la route</span>

<span class="va">lieux</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">plan</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 5 x 3</span>
<span class="co">#&gt;    plan     n     prop</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 47449 0.806   </span>
<span class="co">#&gt; 2     2  5534 0.0941  </span>
<span class="co">#&gt; 3     3  5095 0.0866  </span>
<span class="co">#&gt; 4     4   751 0.0128  </span>
<span class="co">#&gt; 5    NA    11 0.000187</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">$</span><span class="va">plan</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Tracé de la route"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-16-1.png" width="672"></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># il y a une modalité 4 non cité dans la doc... La modalité 4 est "en S" mais citée sur la même ligne que la modalité 3 dans la doc.</span>
<span class="co"># on pourrait créer une variable binaire : rectiligne/non rectiligne</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable larrout = Largeur de la chaussée</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">$</span><span class="va">larrout</span><span class="op">)</span>
<span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span>
<span class="co">#&gt;    2.40    6.00   14.00   42.05   65.00  730.00   58468</span>
<span class="co"># 58 468 valeurs manquantes =&gt; donnée inexploitable</span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable surf = Etat de la surface</span>

<span class="va">lieux</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">surf</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 10 x 3</span>
<span class="co">#&gt;     surf     n     prop</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1     1 46951 0.798   </span>
<span class="co">#&gt;  2     2 10958 0.186   </span>
<span class="co">#&gt;  3     3   115 0.00195 </span>
<span class="co">#&gt;  4     4    18 0.000306</span>
<span class="co">#&gt;  5     5   104 0.00177 </span>
<span class="co">#&gt;  6     6    37 0.000629</span>
<span class="co">#&gt;  7     7   197 0.00335 </span>
<span class="co">#&gt;  8     8   113 0.00192 </span>
<span class="co">#&gt;  9     9   326 0.00554 </span>
<span class="co">#&gt; 10    NA    21 0.000357</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">$</span><span class="va">surf</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Etat de la surface"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-18-1.png" width="672"></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># surtout les modalités 1 et 2 =&gt; je ne sais pas si on regroupe 2, 3 et 4 pour "mouillée" et on fait une modalité autres pour le reste ou alors on ne fait que 2 modalités : normale/pas normale</span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable infra = Aménagement - Infrastructure</span>

<span class="va">lieux</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">infra</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 11 x 3</span>
<span class="co">#&gt;    infra     n     prop</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1     0 49041 0.833   </span>
<span class="co">#&gt;  2     1   734 0.0125  </span>
<span class="co">#&gt;  3     2  1152 0.0196  </span>
<span class="co">#&gt;  4     3   872 0.0148  </span>
<span class="co">#&gt;  5     4   243 0.00413 </span>
<span class="co">#&gt;  6     5  3309 0.0562  </span>
<span class="co">#&gt;  7     6   572 0.00972 </span>
<span class="co">#&gt;  8     7    40 0.000680</span>
<span class="co">#&gt;  9     8   508 0.00863 </span>
<span class="co">#&gt; 10     9  2324 0.0395  </span>
<span class="co">#&gt; 11    NA    45 0.000765</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">$</span><span class="va">infra</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Aménagement - Infrastructure"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-19-1.png" width="672"></p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># je ne sais pas trop pour les regroupements possibles</span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable situ = Situation de l’accident</span>

<span class="va">lieux</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">situ</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 8 x 3</span>
<span class="co">#&gt;    situ     n    prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 50674 0.861  </span>
<span class="co">#&gt; 2     2   955 0.0162 </span>
<span class="co">#&gt; 3     3  4286 0.0728 </span>
<span class="co">#&gt; 4     4   690 0.0117 </span>
<span class="co">#&gt; 5     5   522 0.00887</span>
<span class="co">#&gt; 6     6   443 0.00753</span>
<span class="co">#&gt; 7     8  1154 0.0196 </span>
<span class="co">#&gt; 8    NA   116 0.00197</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">lieux</span><span class="op">$</span><span class="va">situ</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Situation de l accident"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-20-1.png" width="672"></p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># a minima on pourrait regrouper les modalités -1, 6 et 8 en "autres"</span></code></pre></div>
<div id="insertion-des-libellés-dans-la-table-lieux" class="section level2">
<h2 class="hasAnchor">
<a href="#insertion-des-libell%C3%A9s-dans-la-table-lieux" class="anchor"></a>Insertion des libellés dans la table LIEUX</h2>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ajout des libellés relatifs à la catégorie de route avec regroupement les madalités 5 à 9 en "Autre"</span>
<span class="co"># data("lieux",package = "ACC")</span>
<span class="va">lieux</span> <span class="op">&lt;-</span> <span class="va">lieux</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">larrout</span>, <span class="op">-</span><span class="va">lartpc</span>, <span class="op">-</span><span class="va">env1</span>, <span class="op">-</span><span class="va">v1</span>, <span class="op">-</span><span class="va">v2</span>, <span class="op">-</span><span class="va">vosp</span>, <span class="op">-</span><span class="va">pr</span>, <span class="op">-</span><span class="va">pr1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co">#On retire la variable larrout, lartpc, env1 (non ducmentée)</span>
  <span class="fu">mutate</span><span class="op">(</span>catr<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                          <span class="va">catr</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Autoroute"</span>,
                          <span class="va">catr</span><span class="op">==</span><span class="fl">2</span> <span class="op">~</span> <span class="st">"Route Nationale"</span>,
                          <span class="va">catr</span><span class="op">==</span><span class="fl">3</span> <span class="op">~</span> <span class="st">"Route Départementale"</span>,
                          <span class="va">catr</span><span class="op">==</span><span class="fl">4</span> <span class="op">~</span> <span class="st">"Voie Communale"</span>,
                          <span class="cn">TRUE</span>  <span class="op">~</span>  <span class="st">"Autre"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs au régime de circulation avec regroupement des modalités -1 et 4 en "Autre/Non Renseigné"</span>
 <span class="fu">mutate</span><span class="op">(</span>circ<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                          <span class="va">circ</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"A sens unique"</span>, 
                          <span class="va">circ</span><span class="op">==</span><span class="fl">2</span> <span class="op">~</span> <span class="st">"Bidirectionnelle"</span>,
                          <span class="va">circ</span><span class="op">==</span><span class="fl">3</span> <span class="op">~</span> <span class="st">"A chaussées séparées"</span>,
                          <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Autre/Non Renseigné"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs au nombre de voies de circulation avec regroupement des modalités 3 et plus en une seule modalité et regroupement des modalités -1 et 0 en "Non Renseigné"</span>
  <span class="fu">mutate</span><span class="op">(</span>nbv<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span>
                      <span class="va">nbv</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>,<span class="va">nbv</span>,
                      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span>
                            <span class="va">nbv</span> <span class="op">&gt;=</span><span class="fl">3</span>, <span class="st">"3 et plus"</span>,<span class="st">"Non Renseigné"</span>
                            <span class="op">)</span>
                    <span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs au profil de la route avec regroupement des modalités -1, 3 et 4 en "Autre/Non Renseigné"</span>
   <span class="fu">mutate</span><span class="op">(</span>prof<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                            <span class="va">prof</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Plat"</span>,
                            <span class="va">prof</span><span class="op">==</span><span class="fl">2</span> <span class="op">~</span> <span class="st">"Pente"</span>,
                            <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Autre/Non Renseigné"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs au tracé de la route dans une variable binaire "Rectiligne/Non rectiligne"</span>
  <span class="fu">mutate</span><span class="op">(</span>plan<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                          <span class="va">plan</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Rectiligne"</span>,
                          <span class="va">plan</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Non Rectiligne"</span>,
                          <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Non Renseigné"</span><span class="op">)</span>
         <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs à la surface en faisant 2 modalités : Normale et Anormale. </span>
  <span class="fu">mutate</span><span class="op">(</span>surf<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                          <span class="va">surf</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Normale"</span>,
                          <span class="va">surf</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Anormale"</span>,
                          <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Non Renseigné"</span><span class="op">)</span>
         <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs à la présence d'un aménagement ou d'une infrastructure, regroupement en 3 modalités "Oui/Non/Non Renseigné"</span>
  <span class="fu">mutate</span><span class="op">(</span>infra<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                          <span class="va">infra</span><span class="op">==</span><span class="fl">0</span> <span class="op">~</span> <span class="st">"Non"</span>,
                          <span class="va">infra</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Oui"</span>,
                          <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Non Renseigné"</span><span class="op">)</span>
         <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs à la situation de l'accident en regroupant les modalités -1, 6 et 8 en "Autre/Non Renseigné"</span>
  <span class="fu">mutate</span><span class="op">(</span>situ<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                          <span class="va">situ</span><span class="op">==</span><span class="fl">0</span> <span class="op">~</span> <span class="st">"Aucun"</span>,
                          <span class="va">situ</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Sur chaussée"</span>,
                          <span class="va">situ</span><span class="op">==</span><span class="fl">2</span> <span class="op">~</span> <span class="st">"Sur bande d'arrêt d'urgence"</span>,
                          <span class="va">situ</span><span class="op">==</span><span class="fl">3</span> <span class="op">~</span> <span class="st">"Sur accotement"</span>,
                          <span class="va">situ</span><span class="op">==</span><span class="fl">4</span> <span class="op">~</span> <span class="st">"Sur trottoir"</span>,
                          <span class="va">situ</span><span class="op">==</span><span class="fl">5</span> <span class="op">~</span> <span class="st">"Sur piste cyclable"</span>,
                          <span class="cn">TRUE</span>  <span class="op">~</span>  <span class="st">"Autre/Non Renseigné"</span><span class="op">)</span>
        <span class="op">)</span>
<span class="va">lieux</span></code></pre></div>
</div>
</div>
<div id="exploration-des-données-de-la-table-véhicules" class="section level1">
<h1 class="hasAnchor">
<a href="#exploration-des-donn%C3%A9es-de-la-table-v%C3%A9hicules" class="anchor"></a>Exploration des données de la table Véhicules</h1>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># data("vehicules",package = "ACC")</span>
<span class="co"># vehicules &lt;- read.table(here::here("data-raw","vehicules-2019.csv"),sep=";",header = T)</span>
<span class="va">vehicules</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dl_data.html">dl_vehicules</a></span><span class="op">(</span><span class="fl">2019L</span><span class="op">)</span>
<span class="co">#&gt; i Chargement de vehicules-2019.csv</span>
<span class="co"># data(vehicules)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">)</span>
<span class="co">#&gt;    Num_Acc          id_vehicule          num_veh               senc      </span>
<span class="co">#&gt;  Length:100710      Length:100710      Length:100710      Min.   :0.000  </span>
<span class="co">#&gt;  Class :character   Class :character   Class :character   1st Qu.:1.000  </span>
<span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Median :1.000  </span>
<span class="co">#&gt;                                                           Mean   :1.558  </span>
<span class="co">#&gt;                                                           3rd Qu.:2.000  </span>
<span class="co">#&gt;                                                           Max.   :3.000  </span>
<span class="co">#&gt;                                                           NA's   :42     </span>
<span class="co">#&gt;       catv            obs               obsm            choc      </span>
<span class="co">#&gt;  Min.   : 0.00   Min.   : 0.0000   Min.   :0.000   Min.   :0.000  </span>
<span class="co">#&gt;  1st Qu.: 7.00   1st Qu.: 0.0000   1st Qu.:1.000   1st Qu.:1.000  </span>
<span class="co">#&gt;  Median : 7.00   Median : 0.0000   Median :2.000   Median :2.000  </span>
<span class="co">#&gt;  Mean   :12.63   Mean   : 0.9915   Mean   :1.629   Mean   :2.928  </span>
<span class="co">#&gt;  3rd Qu.:10.00   3rd Qu.: 0.0000   3rd Qu.:2.000   3rd Qu.:4.000  </span>
<span class="co">#&gt;  Max.   :99.00   Max.   :17.0000   Max.   :9.000   Max.   :9.000  </span>
<span class="co">#&gt;                  NA's   :41        NA's   :74      NA's   :45     </span>
<span class="co">#&gt;       manv            motor           occutc     </span>
<span class="co">#&gt;  Min.   : 0.000   Min.   :0.000   Min.   : 0.00  </span>
<span class="co">#&gt;  1st Qu.: 1.000   1st Qu.:1.000   1st Qu.: 1.00  </span>
<span class="co">#&gt;  Median : 2.000   Median :1.000   Median : 1.00  </span>
<span class="co">#&gt;  Mean   : 7.271   Mean   :1.178   Mean   : 1.82  </span>
<span class="co">#&gt;  3rd Qu.:15.000   3rd Qu.:1.000   3rd Qu.: 1.00  </span>
<span class="co">#&gt;  Max.   :26.000   Max.   :6.000   Max.   :33.00  </span>
<span class="co">#&gt;  NA's   :44       NA's   :326     NA's   :99818</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Num_Acc"     "id_vehicule" "num_veh"     "senc"        "catv"       </span>
<span class="co">#&gt;  [6] "obs"         "obsm"        "choc"        "manv"        "motor"      </span>
<span class="co">#&gt; [11] "occutc"</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">)</span> <span class="co">#100710</span>
<span class="co">#&gt; [1] 100710</span>
<span class="va">vehicules</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 11</span>
<span class="co">#&gt;    Num_Acc  id_vehicule num_veh  senc  catv   obs  obsm  choc  manv motor occutc</span>
<span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt;</span>
<span class="co">#&gt;  1 2019000~ 138Â 306Â ~ B01         2     7     0     2     5    23     1     NA</span>
<span class="co">#&gt;  2 2019000~ 138Â 306Â ~ A01         2    17     1     0     3    11     1     NA</span>
<span class="co">#&gt;  3 2019000~ 138Â 306Â ~ A01         1     7     4     0     1     0     1     NA</span>
<span class="co">#&gt;  4 2019000~ 138Â 306Â ~ A01         1     7     0     2     1     2     1     NA</span>
<span class="co">#&gt;  5 2019000~ 138Â 306Â ~ B01         1     7     1     0     4     2     1     NA</span>
<span class="co">#&gt;  6 2019000~ 138Â 306Â ~ C01         1     7     0     2     4    23     6     NA</span>
<span class="co">#&gt;  7 2019000~ 138Â 306Â ~ A01         2     7     0     2     4    23     1     NA</span>
<span class="co">#&gt;  8 2019000~ 138Â 306Â ~ B01         2     7     0     2     4    23     1     NA</span>
<span class="co">#&gt;  9 2019000~ 138Â 306Â ~ C01         2     7     0     2     1     2     1     NA</span>
<span class="co">#&gt; 10 2019000~ 138Â 306Â ~ B01         1     7     0     2     4    23     1     NA</span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable senc = Sens de circulation</span>

<span class="va">vehicules</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">senc</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 5 x 3</span>
<span class="co">#&gt;    senc     n     prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1     0  7428 0.0738  </span>
<span class="co">#&gt; 2     1 44661 0.443   </span>
<span class="co">#&gt; 3     2 33543 0.333   </span>
<span class="co">#&gt; 4     3 15036 0.149   </span>
<span class="co">#&gt; 5    NA    42 0.000417</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">$</span><span class="va">senc</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Sens de circulation"</span>, col <span class="op">=</span> <span class="st">"forestgreen"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-23-1.png" width="672"></p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># pas convaincue par l'intérêt de cette variable</span></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable catv = Catégorie du véhicule</span>

<span class="va">vehicules</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">catv</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 31 x 3</span>
<span class="co">#&gt;     catv     n    prop</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt;  1     7 60787 0.604  </span>
<span class="co">#&gt;  2    33  8205 0.0815 </span>
<span class="co">#&gt;  3    10  6608 0.0656 </span>
<span class="co">#&gt;  4     1  5000 0.0496 </span>
<span class="co">#&gt;  5     2  3716 0.0369 </span>
<span class="co">#&gt;  6    30  2990 0.0297 </span>
<span class="co">#&gt;  7    32  2399 0.0238 </span>
<span class="co">#&gt;  8    31  1898 0.0188 </span>
<span class="co">#&gt;  9    34  1325 0.0132 </span>
<span class="co">#&gt; 10    15   978 0.00971</span>
<span class="co">#&gt; # ... with 21 more rows</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">$</span><span class="va">catv</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Catégorie du véhicule"</span>, col <span class="op">=</span> <span class="st">"forestgreen"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-24-1.png" width="672"></p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># on pourrait commencer les données à partir de 2006 car cela supprimerait déjà 9 modalités</span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable obs = Obstacle fixe heurté</span>

<span class="va">vehicules</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">obs</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">)</span><span class="op">)</span>  <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 19 x 3</span>
<span class="co">#&gt;      obs     n     prop</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1     0 86334 0.857   </span>
<span class="co">#&gt;  2     1  2314 0.0230  </span>
<span class="co">#&gt;  3    13  1744 0.0173  </span>
<span class="co">#&gt;  4     2  1483 0.0147  </span>
<span class="co">#&gt;  5     3  1419 0.0141  </span>
<span class="co">#&gt;  6     4  1376 0.0137  </span>
<span class="co">#&gt;  7     6  1119 0.0111  </span>
<span class="co">#&gt;  8     8  1094 0.0109  </span>
<span class="co">#&gt;  9    14   798 0.00792 </span>
<span class="co">#&gt; 10    12   735 0.00730 </span>
<span class="co">#&gt; 11    15   537 0.00533 </span>
<span class="co">#&gt; 12    16   399 0.00396 </span>
<span class="co">#&gt; 13     9   395 0.00392 </span>
<span class="co">#&gt; 14     7   304 0.00302 </span>
<span class="co">#&gt; 15    11   213 0.00211 </span>
<span class="co">#&gt; 16     5   163 0.00162 </span>
<span class="co">#&gt; 17    17   134 0.00133 </span>
<span class="co">#&gt; 18    10   108 0.00107 </span>
<span class="co">#&gt; 19    NA    41 0.000407</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">$</span><span class="va">obs</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Obstacle fixe heurté"</span>, col <span class="op">=</span> <span class="st">"forestgreen"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-25-1.png" width="672"></p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># on pourrait créer une variable binaire : oui/non</span></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable obsm = Obstacle mobile heurté</span>

<span class="va">vehicules</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">obsm</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">)</span><span class="op">)</span>  <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 8 x 3</span>
<span class="co">#&gt;    obsm     n     prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1     2 70290 0.698   </span>
<span class="co">#&gt; 2     0 18220 0.181   </span>
<span class="co">#&gt; 3     1 10380 0.103   </span>
<span class="co">#&gt; 4     9   902 0.00896 </span>
<span class="co">#&gt; 5     6   712 0.00707 </span>
<span class="co">#&gt; 6    NA    74 0.000735</span>
<span class="co">#&gt; 7     4    71 0.000705</span>
<span class="co">#&gt; 8     5    61 0.000606</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">$</span><span class="va">obsm</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Obstacle mobile heurté"</span>, col <span class="op">=</span> <span class="st">"forestgreen"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-26-1.png" width="672"></p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># on pourrait regrouper les modalités en : aucun/piéton/véhicules/animal/autre</span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable choc = Point de choc initial</span>

<span class="va">vehicules</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">choc</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">)</span><span class="op">)</span>  <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 11 x 3</span>
<span class="co">#&gt;     choc     n     prop</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1     1 36013 0.358   </span>
<span class="co">#&gt;  2     3 15028 0.149   </span>
<span class="co">#&gt;  3     2 12216 0.121   </span>
<span class="co">#&gt;  4     4 10298 0.102   </span>
<span class="co">#&gt;  5     8  7128 0.0708  </span>
<span class="co">#&gt;  6     0  6038 0.0600  </span>
<span class="co">#&gt;  7     7  5945 0.0590  </span>
<span class="co">#&gt;  8     6  3612 0.0359  </span>
<span class="co">#&gt;  9     5  2947 0.0293  </span>
<span class="co">#&gt; 10     9  1440 0.0143  </span>
<span class="co">#&gt; 11    NA    45 0.000447</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">$</span><span class="va">choc</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Point de choc initial"</span>, col <span class="op">=</span> <span class="st">"forestgreen"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-27-1.png" width="672"></p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># Fait-on des regroupements du style : avant/arrière/côté et aucun ?</span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable manv = Manoeuvre principale avant l’accident</span>

<span class="va">vehicules</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">manv</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">)</span><span class="op">)</span>  <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 28 x 3</span>
<span class="co">#&gt;     manv     n   prop</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt;  1     1 40258 0.400 </span>
<span class="co">#&gt;  2     2 11792 0.117 </span>
<span class="co">#&gt;  3    15  8190 0.0813</span>
<span class="co">#&gt;  4     0  5947 0.0591</span>
<span class="co">#&gt;  5    13  4518 0.0449</span>
<span class="co">#&gt;  6    26  3603 0.0358</span>
<span class="co">#&gt;  7    17  3598 0.0357</span>
<span class="co">#&gt;  8     9  3003 0.0298</span>
<span class="co">#&gt;  9    23  2763 0.0274</span>
<span class="co">#&gt; 10    16  2546 0.0253</span>
<span class="co">#&gt; # ... with 18 more rows</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">$</span><span class="va">manv</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Manoeuvre principale avant l’accident"</span>, col <span class="op">=</span> <span class="st">"forestgreen"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-28-1.png" width="672"></p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># Vu les résultats de la répartition, pas convaincue de l'intérêt de la variable</span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable occutc = Nombre d’occupants dans le transport en commun</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">vehicules</span><span class="op">$</span><span class="va">occutc</span><span class="op">)</span>
<span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span>
<span class="co">#&gt;    0.00    1.00    1.00    1.82    1.00   33.00   99818</span>
<span class="co"># 99 818 valeurs manquantes =&gt; donnée inexploitable</span></code></pre></div>
<div id="insertion-des-libellés-dans-la-table-vehicules" class="section level2">
<h2 class="hasAnchor">
<a href="#insertion-des-libell%C3%A9s-dans-la-table-vehicules" class="anchor"></a>Insertion des libellés dans la table VEHICULES</h2>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ajout des libellés relatifs à la catégorie de véhicules </span>
 <span class="va">vehicules</span> <span class="op">&lt;-</span> <span class="va">vehicules</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">senc</span>,<span class="va">manv</span>,<span class="va">occutc</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># On retire les variables inexploitables</span>
  <span class="fu">mutate</span><span class="op">(</span>catv<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                        <span class="va">catv</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Bicyclette"</span>,
                        <span class="va">catv</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">30</span><span class="op">:</span><span class="fl">34</span><span class="op">)</span> <span class="op">~</span> <span class="st">"2 roues motorisé"</span>,
                        <span class="va">catv</span><span class="op">==</span><span class="fl">7</span> <span class="op">~</span> <span class="st">"VL seul"</span>,
                        <span class="va">catv</span><span class="op">==</span><span class="fl">10</span> <span class="op">~</span> <span class="st">"VU seul"</span>,
                        <span class="va">catv</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">13</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Poids lourd"</span>,
                        <span class="va">catv</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">16</span><span class="op">:</span><span class="fl">17</span>,<span class="fl">20</span><span class="op">:</span><span class="fl">21</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Engin agricole"</span>,
                        <span class="va">catv</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">37</span>,<span class="fl">38</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Bus"</span>,
                        <span class="va">catv</span><span class="op">==</span><span class="fl">39</span> <span class="op">~</span> <span class="st">"Train"</span>,
                        <span class="va">catv</span><span class="op">==</span><span class="fl">40</span> <span class="op">~</span> <span class="st">"Tramway"</span>,
                        <span class="va">catv</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">35</span>,<span class="fl">36</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Quad"</span>,
                            <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Autre"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout d'une variable binaire "Oui/Non" si un obstacle fixe a été heurté</span>
  <span class="fu">mutate</span><span class="op">(</span>obs<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                        <span class="va">obs</span><span class="op">==</span><span class="fl">0</span> <span class="op">~</span> <span class="st">"Non"</span>,
                        <span class="va">obs</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">17</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Oui"</span>,
                        <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Non Renseigné"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs à l'obstale mobile heurté avec regroupement en Aucun/Piéton/Véhicule/Animal/Autre</span>
    <span class="fu">mutate</span><span class="op">(</span>obsm<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                          <span class="va">obsm</span><span class="op">==</span><span class="fl">0</span> <span class="op">~</span> <span class="st">"Aucun"</span>,
                          <span class="va">obsm</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Piéton"</span>,
                          <span class="va">obsm</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Véhicule"</span>,
                          <span class="va">obsm</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Animal"</span>,
                          <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Autre"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs au point de choc initial avec regroupement Avant/Arrière/Côté/Aucun</span>
  <span class="fu">mutate</span><span class="op">(</span>choc<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                        <span class="va">choc</span><span class="op">==</span><span class="fl">0</span> <span class="op">~</span> <span class="st">"Aucun"</span>,
                        <span class="va">choc</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Avant"</span>,
                        <span class="va">choc</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Arrière"</span>,
                        <span class="va">choc</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>,<span class="fl">8</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Côté"</span>,
                        <span class="va">choc</span><span class="op">==</span><span class="fl">9</span> <span class="op">~</span> <span class="st">"Chocs multiples (tonneaux)"</span>,
                        <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Non Renseigné"</span><span class="op">)</span>
        <span class="op">)</span>
<span class="va">vehicules</span></code></pre></div>
</div>
</div>
<div id="exploration-des-données-de-la-table-usagers" class="section level1">
<h1 class="hasAnchor">
<a href="#exploration-des-donn%C3%A9es-de-la-table-usagers" class="anchor"></a>Exploration des données de la table usagers</h1>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># usagers &lt;- read.table(here::here("data-raw","usagers-2019.csv"),sep=";",header = T)</span>
<span class="co"># usagers &lt;- data("usagers",package = "ACC")</span>
<span class="va">usagers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dl_data.html">dl_usagers</a></span><span class="op">(</span><span class="fl">2019L</span><span class="op">)</span>
<span class="co">#&gt; i Chargement de usagers-2019.csv</span>
<span class="co">#&gt; Warning: The following named parsers don't match the column names: secu</span>
<span class="co"># data(usagers)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">)</span>
<span class="co">#&gt;    Num_Acc          id_vehicule          num_veh              place       </span>
<span class="co">#&gt;  Length:132977      Length:132977      Length:132977      Min.   : 1.000  </span>
<span class="co">#&gt;  Class :character   Class :character   Class :character   1st Qu.: 1.000  </span>
<span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Median : 1.000  </span>
<span class="co">#&gt;                                                           Mean   : 2.185  </span>
<span class="co">#&gt;                                                           3rd Qu.: 2.000  </span>
<span class="co">#&gt;                                                           Max.   :10.000  </span>
<span class="co">#&gt;                                                                           </span>
<span class="co">#&gt;       catu            grav            sexe         an_nais         trajet     </span>
<span class="co">#&gt;  Min.   :1.000   Min.   :1.000   Min.   :1.00   Min.   :1900   Min.   :0.000  </span>
<span class="co">#&gt;  1st Qu.:1.000   1st Qu.:1.000   1st Qu.:1.00   1st Qu.:1967   1st Qu.:0.000  </span>
<span class="co">#&gt;  Median :1.000   Median :3.000   Median :1.00   Median :1983   Median :4.000  </span>
<span class="co">#&gt;  Mean   :1.353   Mean   :2.543   Mean   :1.32   Mean   :1980   Mean   :3.242  </span>
<span class="co">#&gt;  3rd Qu.:2.000   3rd Qu.:4.000   3rd Qu.:2.00   3rd Qu.:1995   3rd Qu.:5.000  </span>
<span class="co">#&gt;  Max.   :3.000   Max.   :4.000   Max.   :2.00   Max.   :2019   Max.   :9.000  </span>
<span class="co">#&gt;                                                                NA's   :543    </span>
<span class="co">#&gt;     secu1               secu2           secu3             locp      </span>
<span class="co">#&gt;  Length:132977      Min.   :0.00    Min.   :0.00     Min.   :0.00   </span>
<span class="co">#&gt;  Class :character   1st Qu.:0.00    1st Qu.:0.00     1st Qu.:0.00   </span>
<span class="co">#&gt;  Mode  :character   Median :0.00    Median :9.00     Median :0.00   </span>
<span class="co">#&gt;                     Mean   :2.52    Mean   :5.57     Mean   :0.44   </span>
<span class="co">#&gt;                     3rd Qu.:6.00    3rd Qu.:9.00     3rd Qu.:0.00   </span>
<span class="co">#&gt;                     Max.   :9.00    Max.   :9.00     Max.   :9.00   </span>
<span class="co">#&gt;                     NA's   :40164   NA's   :131223   NA's   :50473  </span>
<span class="co">#&gt;      actp               etatp       </span>
<span class="co">#&gt;  Length:132977      Min.   :1.00    </span>
<span class="co">#&gt;  Class :character   1st Qu.:1.00    </span>
<span class="co">#&gt;  Mode  :character   Median :1.00    </span>
<span class="co">#&gt;                     Mean   :1.28    </span>
<span class="co">#&gt;                     3rd Qu.:1.00    </span>
<span class="co">#&gt;                     Max.   :3.00    </span>
<span class="co">#&gt;                     NA's   :121920</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Num_Acc"     "id_vehicule" "num_veh"     "place"       "catu"       </span>
<span class="co">#&gt;  [6] "grav"        "sexe"        "an_nais"     "trajet"      "secu1"      </span>
<span class="co">#&gt; [11] "secu2"       "secu3"       "locp"        "actp"        "etatp"</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">)</span> <span class="co">#132977</span>
<span class="co">#&gt; [1] 132977</span>
<span class="va">usagers</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 10 x 15</span>
<span class="co">#&gt;    Num_Acc id_vehicule num_veh place  catu  grav  sexe an_nais trajet secu1</span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;  &lt;int&gt; &lt;chr&gt;</span>
<span class="co">#&gt;  1 201900~ 138Â 306Â ~ B01         2     2     4     2    2002      0 1    </span>
<span class="co">#&gt;  2 201900~ 138Â 306Â ~ B01         1     1     4     2    1993      5 1    </span>
<span class="co">#&gt;  3 201900~ 138Â 306Â ~ A01         1     1     1     1    1959      0 1    </span>
<span class="co">#&gt;  4 201900~ 138Â 306Â ~ A01         1     1     4     2    1994      0 1    </span>
<span class="co">#&gt;  5 201900~ 138Â 306Â ~ A01         1     1     1     1    1996      0 1    </span>
<span class="co">#&gt;  6 201900~ 138Â 306Â ~ A01         2     2     4     2    1930      9 1    </span>
<span class="co">#&gt;  7 201900~ 138Â 306Â ~ B01         1     1     4     1    1995      9 1    </span>
<span class="co">#&gt;  8 201900~ 138Â 306Â ~ C01         1     1     1     1    1966      1 1    </span>
<span class="co">#&gt;  9 201900~ 138Â 306Â ~ A01         1     1     1     1    1993      0 1    </span>
<span class="co">#&gt; 10 201900~ 138Â 306Â ~ B01         1     1     1     1    1968      5 1    </span>
<span class="co">#&gt; # ... with 5 more variables: secu2 &lt;int&gt;, secu3 &lt;int&gt;, locp &lt;int&gt;, actp &lt;chr&gt;,</span>
<span class="co">#&gt; #   etatp &lt;int&gt;</span></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable place = Place occupée dans le véhicule</span>

<span class="va">usagers</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">place</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">)</span><span class="op">)</span>  <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 10 x 3</span>
<span class="co">#&gt;    place     n    prop</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt;  1     1 96935 0.729  </span>
<span class="co">#&gt;  2     2 15495 0.117  </span>
<span class="co">#&gt;  3    10 11265 0.0847 </span>
<span class="co">#&gt;  4     3  2530 0.0190 </span>
<span class="co">#&gt;  5     4  2301 0.0173 </span>
<span class="co">#&gt;  6     9  1539 0.0116 </span>
<span class="co">#&gt;  7     7  1355 0.0102 </span>
<span class="co">#&gt;  8     5   763 0.00574</span>
<span class="co">#&gt;  9     8   619 0.00465</span>
<span class="co">#&gt; 10     6   175 0.00132</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">$</span><span class="va">place</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Place occupée dans le véhicule"</span>, col <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-32-1.png" width="672"></p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># pas convaincue de son apport par rapport à la variable catu</span></code></pre></div>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable catu = Catégorie d'usager</span>

<span class="va">usagers</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">catu</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">)</span><span class="op">)</span>  <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;    catu     n   prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 97356 0.732 </span>
<span class="co">#&gt; 2     2 24356 0.183 </span>
<span class="co">#&gt; 3     3 11265 0.0847</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">$</span><span class="va">catu</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Catégorie d'usager"</span>, col <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-33-1.png" width="672"></p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># on garde telle quelle</span></code></pre></div>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable grav = Gravité de blessure de l'usager</span>

<span class="va">usagers</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">grav</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">)</span><span class="op">)</span>  <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 4 x 3</span>
<span class="co">#&gt;    grav     n   prop</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 55314 0.416 </span>
<span class="co">#&gt; 2     4 53307 0.401 </span>
<span class="co">#&gt; 3     3 20858 0.157 </span>
<span class="co">#&gt; 4     2  3498 0.0263</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">$</span><span class="va">grav</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Gravité de blessure de l'usager"</span>, col <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-34-1.png" width="672"></p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># on garde telle quelle</span></code></pre></div>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable -    an_nais = Année de naissance </span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">$</span><span class="va">an_nais</span><span class="op">)</span>
<span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="co">#&gt;    1900    1967    1983    1980    1995    2019</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">$</span><span class="va">an_nais</span>, main <span class="op">=</span> <span class="st">"Répartition des accidentés selon leur année de naissance"</span>, col <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-35-1.png" width="672"></p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># à voir si on fait des classes</span></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable trajet = Motif du déplacement au moment de l’accident</span>

<span class="va">usagers</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">trajet</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">)</span><span class="op">)</span>  <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 8 x 3</span>
<span class="co">#&gt;   trajet     n    prop</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1      5 52021 0.391  </span>
<span class="co">#&gt; 2      0 34376 0.259  </span>
<span class="co">#&gt; 3      1 17677 0.133  </span>
<span class="co">#&gt; 4      4 12506 0.0940 </span>
<span class="co">#&gt; 5      9  9461 0.0711 </span>
<span class="co">#&gt; 6      3  3557 0.0267 </span>
<span class="co">#&gt; 7      2  2836 0.0213 </span>
<span class="co">#&gt; 8     NA   543 0.00408</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">$</span><span class="va">trajet</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Motif du déplacement au moment de l’accident"</span>, col <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-36-1.png" width="672"></p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># les modalités non renseigné ou autre représentent 33 % =&gt; pas convaincue de son intérêt</span></code></pre></div>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable locp = Localisation du piéton</span>

<span class="va">usagers</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">locp</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">)</span><span class="op">)</span>  <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 11 x 3</span>
<span class="co">#&gt;     locp     n     prop</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1     0 71472 0.537   </span>
<span class="co">#&gt;  2    NA 50473 0.380   </span>
<span class="co">#&gt;  3     3  3423 0.0257  </span>
<span class="co">#&gt;  4     2  2491 0.0187  </span>
<span class="co">#&gt;  5     4  1641 0.0123  </span>
<span class="co">#&gt;  6     1  1604 0.0121  </span>
<span class="co">#&gt;  7     5   793 0.00596 </span>
<span class="co">#&gt;  8     9   575 0.00432 </span>
<span class="co">#&gt;  9     6   320 0.00241 </span>
<span class="co">#&gt; 10     8   169 0.00127 </span>
<span class="co">#&gt; 11     7    16 0.000120</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">$</span><span class="va">locp</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Localisation du piéton"</span>, col <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-37-1.png" width="672"></p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># les modalités non renseigné ou sans objet représentent 92 % =&gt; pas convaincue de son intérêt sauf si on fait un zoom sur les accidents avec piétons</span></code></pre></div>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable actp = Action du piéton</span>

<span class="va">usagers</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">actp</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">)</span><span class="op">)</span>  <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 13 x 3</span>
<span class="co">#&gt;    actp      n      prop</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;int&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 0     95554 0.719    </span>
<span class="co">#&gt;  2 &lt;NA&gt;  26341 0.198    </span>
<span class="co">#&gt;  3 3      8162 0.0614   </span>
<span class="co">#&gt;  4 1       701 0.00527  </span>
<span class="co">#&gt;  5 9       688 0.00517  </span>
<span class="co">#&gt;  6 5       453 0.00341  </span>
<span class="co">#&gt;  7 B       431 0.00324  </span>
<span class="co">#&gt;  8 2       313 0.00235  </span>
<span class="co">#&gt;  9 4       167 0.00126  </span>
<span class="co">#&gt; 10 A       107 0.000805 </span>
<span class="co">#&gt; 11 6        29 0.000218 </span>
<span class="co">#&gt; 12 7        18 0.000135 </span>
<span class="co">#&gt; 13 8        13 0.0000978</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">$</span><span class="va">actp</span><span class="op">)</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Action du piéton"</span>, col <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span>
<span class="co">#&gt; Warning in hist(as.numeric(usagers$actp), main = "Répartition de la variable</span>
<span class="co">#&gt; Action du piéton", : NAs introduits lors de la conversion automatique</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-38-1.png" width="672"></p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># idem variable locp</span></code></pre></div>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># variable etatp = Accompagnants du piéton</span>

<span class="va">usagers</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">etatp</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
            prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">)</span><span class="op">)</span>  <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">prop</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 4 x 3</span>
<span class="co">#&gt;   etatp      n    prop</span>
<span class="co">#&gt;   &lt;int&gt;  &lt;int&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1    NA 121920 0.917  </span>
<span class="co">#&gt; 2     1   8392 0.0631 </span>
<span class="co">#&gt; 3     2   2219 0.0167 </span>
<span class="co">#&gt; 4     3    446 0.00335</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">usagers</span><span class="op">$</span><span class="va">etatp</span>, main <span class="op">=</span> <span class="st">"Répartition de la variable Accompagnants du piéton"</span>, col <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></code></pre></div>
<p><img src="exploration-donnees-brutes_files/figure-html/unnamed-chunk-39-1.png" width="672"></p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R">  
<span class="co"># idem variable locp</span></code></pre></div>
<div id="insertion-des-libellés-dans-la-table-usagers" class="section level2">
<h2 class="hasAnchor">
<a href="#insertion-des-libell%C3%A9s-dans-la-table-usagers" class="anchor"></a>Insertion des libellés dans la table USAGERS</h2>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ajout des libellés relatifs à la catégorie d'usager</span>
<span class="va">usagers</span> <span class="op">&lt;-</span> <span class="va">usagers</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">place</span>,<span class="va">trajet</span>,<span class="va">locp</span>,<span class="va">actp</span>,<span class="va">etatp</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># On retire les variables inexploitables</span>
  <span class="fu">mutate</span><span class="op">(</span>catu<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                        <span class="va">catu</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Conducteur"</span>,
                        <span class="va">catu</span><span class="op">==</span><span class="fl">2</span> <span class="op">~</span> <span class="st">"Passager"</span>,
                        <span class="va">catu</span><span class="op">==</span><span class="fl">3</span> <span class="op">~</span> <span class="st">"Piéton"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs à la gravité de blessure de l'usager</span>
  <span class="fu">mutate</span><span class="op">(</span>grav<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                        <span class="va">grav</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Indemne"</span>,
                        <span class="va">grav</span><span class="op">==</span><span class="fl">2</span> <span class="op">~</span> <span class="st">"Tué"</span>,
                        <span class="va">grav</span><span class="op">==</span><span class="fl">3</span> <span class="op">~</span> <span class="st">"Blessé hospitalisé"</span>,
                        <span class="va">grav</span><span class="op">==</span><span class="fl">4</span> <span class="op">~</span> <span class="st">"Blessé léger"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">%&gt;%</span>
<span class="co"># Ajout des libellés relatifs au sexe de l'usager</span>
    <span class="fu">mutate</span><span class="op">(</span>sexe<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span>
                          <span class="va">sexe</span><span class="op">==</span><span class="fl">1</span> <span class="op">~</span> <span class="st">"Masculin"</span>,
                          <span class="va">sexe</span><span class="op">==</span><span class="fl">2</span> <span class="op">~</span> <span class="st">"Féminin"</span><span class="op">)</span>
        <span class="op">)</span>
<span class="va">usagers</span></code></pre></div>
</div>
</div>
<div id="jointure-des-tables" class="section level1">
<h1 class="hasAnchor">
<a href="#jointure-des-tables" class="anchor"></a>Jointure des tables</h1>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">accidents</span> <span class="op">&lt;-</span> <span class="va">usagers</span> <span class="op">%&gt;%</span> 
  <span class="fu">left_join</span><span class="op">(</span><span class="va">vehicules</span> <span class="op">%&gt;%</span> <span class="fu">distinct</span><span class="op">(</span><span class="va">Num_Acc</span>, <span class="va">num_veh</span>, <span class="va">catv</span><span class="op">)</span>,
            by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Num_Acc"</span>, <span class="st">"num_veh"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">left_join</span><span class="op">(</span><span class="va">caracteristiques</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Num_Acc"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">left_join</span><span class="op">(</span><span class="va">lieux</span>,by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Num_Acc"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Alexandre Atthar, Cecile Simon, Coralie Bos.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
